---
title: lib/model/abstract.js - Raddish API
category: api
layout: default
---

<div class="row">
    <div class="col-md-3">
        <h1>Classes</h1>
        
        <ul class="nav nav-pills nav-stacked">
                <li {% if page.url == '/docs/classes/AbstractAdapter.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/AbstractAdapter.html">AbstractAdapter</a>
                </li>
                <li {% if page.url == '/docs/classes/AbstractDispatcher.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/AbstractDispatcher.html">AbstractDispatcher</a>
                </li>
                <li {% if page.url == '/docs/classes/Application.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Application.html">Application</a>
                </li>
                <li {% if page.url == '/docs/classes/CommandBehavior.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/CommandBehavior.html">CommandBehavior</a>
                </li>
                <li {% if page.url == '/docs/classes/CommandChain.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/CommandChain.html">CommandChain</a>
                </li>
                <li {% if page.url == '/docs/classes/CommandContext.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/CommandContext.html">CommandContext</a>
                </li>
                <li {% if page.url == '/docs/classes/Controller.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Controller.html">Controller</a>
                </li>
                <li {% if page.url == '/docs/classes/ControllerAbstract.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/ControllerAbstract.html">ControllerAbstract</a>
                </li>
                <li {% if page.url == '/docs/classes/DefaultAuthenticator.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/DefaultAuthenticator.html">DefaultAuthenticator</a>
                </li>
                <li {% if page.url == '/docs/classes/Dispatcher.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Dispatcher.html">Dispatcher</a>
                </li>
                <li {% if page.url == '/docs/classes/Inflector.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Inflector.html">Inflector</a>
                </li>
                <li {% if page.url == '/docs/classes/Mixin.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Mixin.html">Mixin</a>
                </li>
                <li {% if page.url == '/docs/classes/Model.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Model.html">Model</a>
                </li>
                <li {% if page.url == '/docs/classes/ModelAbstract.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/ModelAbstract.html">ModelAbstract</a>
                </li>
                <li {% if page.url == '/docs/classes/MongoAdapter.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/MongoAdapter.html">MongoAdapter</a>
                </li>
                <li {% if page.url == '/docs/classes/MysqlAdapter.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/MysqlAdapter.html">MysqlAdapter</a>
                </li>
                <li {% if page.url == '/docs/classes/ObjectIdentifier.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/ObjectIdentifier.html">ObjectIdentifier</a>
                </li>
                <li {% if page.url == '/docs/classes/ObjectLoader.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/ObjectLoader.html">ObjectLoader</a>
                </li>
                <li {% if page.url == '/docs/classes/ObjectManager.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/ObjectManager.html">ObjectManager</a>
                </li>
                <li {% if page.url == '/docs/classes/Plugin.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Plugin.html">Plugin</a>
                </li>
                <li {% if page.url == '/docs/classes/RaddishError.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/RaddishError.html">RaddishError</a>
                </li>
                <li {% if page.url == '/docs/classes/Role.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Role.html">Role</a>
                </li>
                <li {% if page.url == '/docs/classes/Router.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Router.html">Router</a>
                </li>
                <li {% if page.url == '/docs/classes/Row.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Row.html">Row</a>
                </li>
                <li {% if page.url == '/docs/classes/RowAbstract.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/RowAbstract.html">RowAbstract</a>
                </li>
                <li {% if page.url == '/docs/classes/Rowset.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Rowset.html">Rowset</a>
                </li>
                <li {% if page.url == '/docs/classes/RowsetAbstract.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/RowsetAbstract.html">RowsetAbstract</a>
                </li>
                <li {% if page.url == '/docs/classes/Socket.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Socket.html">Socket</a>
                </li>
                <li {% if page.url == '/docs/classes/SqliteAdapter.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/SqliteAdapter.html">SqliteAdapter</a>
                </li>
                <li {% if page.url == '/docs/classes/States.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/States.html">States</a>
                </li>
                <li {% if page.url == '/docs/classes/Table.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/Table.html">Table</a>
                </li>
                <li {% if page.url == '/docs/classes/ViewAbstract.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/ViewAbstract.html">ViewAbstract</a>
                </li>
                <li {% if page.url == '/docs/classes/ViewJson.html' %} class="active" {% endif %}>
                    <a href="/docs/classes/ViewJson.html">ViewJson</a>
                </li>
        </ul>    </div>
    <div class="col-md-9">
        <h1>File: lib/model/abstract.js</h1>
        
        
        {% highlight javascript linenos %}
        "use strict";
        
        var ObjectManager   = require('../object/manager');
        var States          = require('./states/states');
        var util            = require('util');
        
        /**
         * This is an abstract model, used when using a model without table
         * or creating your own model.
         *
         * This will create the states and set some predefined states which can be used at will.
         *
         * @class ModelAbstract
         * @extends ObjectManager
         * @constructor
         */
        function ModelAbstract(config) {
            this.states = new States();
            this.list = {};
            this.item = {};
        
            this.states
                .insert('limit', 'int')
                .insert('offset', 'int')
                .insert('sort', 'string')
                .insert('direction', 'string', 'asc');
        
            ObjectManager.call(this, config);
        }
        
        util.inherits(ModelAbstract, ObjectManager);
        
        /**
         * getList method which you need to override when you are fetching your own data.
         *
         * @method getList
         * @returns {Object} The retreived data from the data object.
         */
        ModelAbstract.prototype.getList = function () {
            return new Promise.cast(this.list);
        };
        
        /**
         * getItem method which you need to override when you are fetching your own data.
         *
         * @method getItem
         * @returns {Object} The retreived data from the data object.
         */
        ModelAbstract.prototype.getItem = function () {
            return new Promise.cast(this.item);
        };
        
        /**
         * getTotal which has the basic behavior of counting the rows in the current list.
         *
         * @method getTotal
         * @returns {Number} The total amount of rows.
         */
        ModelAbstract.prototype.getTotal = function() {
            if(!this.total) {
                return this.getList()
                    .then(function(list) {
                        return list.rows.length;
                    });
            } else {
                return this.total;
            }
        };
        
        /**
         * This method is used to set the states.
         * This method accepts an array or a string as the first parameter.
         * When the first parameter is a string the second parameter will be the value of this state.
         *
         * @method set
         * @param {Object|string} name The state/ array of states to set
         * @param {*} value The value of the state
         * @returns {ModelAbstract} The current model with set states.
         */
        ModelAbstract.prototype.set = function (name, value) {
            if(typeof name == 'string') {
                this.states.set(name, value);
            } else if(typeof name == 'object') {
                for(var index in name) {
                    this.states.set(index, name[index]);
                }
            }
        
            return this;
        };
        
        /**
         * This method will return the table connected to the current model.
         *
         * @method getTable
         * @returns {Promise} The promise holding the table object as content.
         */
        ModelAbstract.prototype.getTable = function () {
            var self = this;
            var identifier = this.getIdentifier().clone();
        
            return self.getObject(identifier.setPath(['database', 'table']).setName(Inflector.singularize(identifier.getName())))
                .then(function(table) {
                    return table;
                });
        };
        
        module.exports = ModelAbstract
        {% endhighlight %}    </div>
</div>