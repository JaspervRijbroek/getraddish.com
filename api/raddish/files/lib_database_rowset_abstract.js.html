---
layout: default
---

<div class="api">
    <aside class="sidebar">
        <ul>
                <li {% if page.url == '../classes/AbstractAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/AbstractAdapter.html">
                        AbstractAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/AbstractDispatcher.html' %} class="active" {% endif %}>
                    <a href="../classes/AbstractDispatcher.html">
                        AbstractDispatcher
                    </a>
                </li>
                <li {% if page.url == '../classes/Application.html' %} class="active" {% endif %}>
                    <a href="../classes/Application.html">
                        Application
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandBehavior.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandBehavior.html">
                        CommandBehavior
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandChain.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandChain.html">
                        CommandChain
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandContext.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandContext.html">
                        CommandContext
                    </a>
                </li>
                <li {% if page.url == '../classes/Controller.html' %} class="active" {% endif %}>
                    <a href="../classes/Controller.html">
                        Controller
                    </a>
                </li>
                <li {% if page.url == '../classes/ControllerAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ControllerAbstract.html">
                        ControllerAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/DefaultAuthenticator.html' %} class="active" {% endif %}>
                    <a href="../classes/DefaultAuthenticator.html">
                        DefaultAuthenticator
                    </a>
                </li>
                <li {% if page.url == '../classes/Dispatcher.html' %} class="active" {% endif %}>
                    <a href="../classes/Dispatcher.html">
                        Dispatcher
                    </a>
                </li>
                <li {% if page.url == '../classes/Inflector.html' %} class="active" {% endif %}>
                    <a href="../classes/Inflector.html">
                        Inflector
                    </a>
                </li>
                <li {% if page.url == '../classes/Mixin.html' %} class="active" {% endif %}>
                    <a href="../classes/Mixin.html">
                        Mixin
                    </a>
                </li>
                <li {% if page.url == '../classes/Model.html' %} class="active" {% endif %}>
                    <a href="../classes/Model.html">
                        Model
                    </a>
                </li>
                <li {% if page.url == '../classes/ModelAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ModelAbstract.html">
                        ModelAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/MongoAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/MongoAdapter.html">
                        MongoAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/MysqlAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/MysqlAdapter.html">
                        MysqlAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectIdentifier.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectIdentifier.html">
                        ObjectIdentifier
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectLoader.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectLoader.html">
                        ObjectLoader
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectManager.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectManager.html">
                        ObjectManager
                    </a>
                </li>
                <li {% if page.url == '../classes/Plugin.html' %} class="active" {% endif %}>
                    <a href="../classes/Plugin.html">
                        Plugin
                    </a>
                </li>
                <li {% if page.url == '../classes/RaddishError.html' %} class="active" {% endif %}>
                    <a href="../classes/RaddishError.html">
                        RaddishError
                    </a>
                </li>
                <li {% if page.url == '../classes/Role.html' %} class="active" {% endif %}>
                    <a href="../classes/Role.html">
                        Role
                    </a>
                </li>
                <li {% if page.url == '../classes/Router.html' %} class="active" {% endif %}>
                    <a href="../classes/Router.html">
                        Router
                    </a>
                </li>
                <li {% if page.url == '../classes/Row.html' %} class="active" {% endif %}>
                    <a href="../classes/Row.html">
                        Row
                    </a>
                </li>
                <li {% if page.url == '../classes/RowAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/RowAbstract.html">
                        RowAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/Rowset.html' %} class="active" {% endif %}>
                    <a href="../classes/Rowset.html">
                        Rowset
                    </a>
                </li>
                <li {% if page.url == '../classes/RowsetAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/RowsetAbstract.html">
                        RowsetAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/Socket.html' %} class="active" {% endif %}>
                    <a href="../classes/Socket.html">
                        Socket
                    </a>
                </li>
                <li {% if page.url == '../classes/SqliteAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/SqliteAdapter.html">
                        SqliteAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/States.html' %} class="active" {% endif %}>
                    <a href="../classes/States.html">
                        States
                    </a>
                </li>
                <li {% if page.url == '../classes/Table.html' %} class="active" {% endif %}>
                    <a href="../classes/Table.html">
                        Table
                    </a>
                </li>
                <li {% if page.url == '../classes/ViewAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ViewAbstract.html">
                        ViewAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/ViewJson.html' %} class="active" {% endif %}>
                    <a href="../classes/ViewJson.html">
                        ViewJson
                    </a>
                </li>
        </ul>    </aside>

    <article>
        <h1 class="file-heading">File: lib/database/rowset/abstract.js</h1>
        
        <div class="file">
            <pre class="code prettyprint linenums">
        &quot;use strict&quot;;
        
        var ObjectManager   = require(&#x27;../../object/manager&#x27;),
            util            = require(&#x27;util&#x27;);
        
        /**
         * The RowsetAbstract class can be used without a table,
         * you can use this when using an external API.
         *
         * @class RowsetAbstract
         * @extends ObjectManager
         * @param {Object} config The basic config
         * @constructor
         */
        function RowsetAbstract(config) {
            ObjectManager.call(this, config);
        
            this.rows = [];
        }
        
        util.inherits(RowsetAbstract, ObjectManager);
        
        /**
         * This method will set the data in the Rowset object,
         * This accepts a array, for every entry it will create Row object and add it to the rows array
         *
         * @method setData
         * @param {Object} data The data to set on the object
         * @returns {Promise} Returns the Rowset object with filled data
         */
        RowsetAbstract.prototype.setData = function (data) {
            var self = this;
        
            // TODO: There is stilla bug over here.
            return self.getRow()
                .then(function (row) {
                    for(var index in data) {
                        var rowObj = row.clone();
                        rowObj = rowObj.setData(data[index]);
        
                        if(self.rows.indexOf(rowObj) == -1) {
                            self.rows.push(rowObj);
                        }
                    }
        
                    return self;
                });
        };
        
        /**
         * This method will return only the data from the Rowset object
         *
         * @method getData
         * @returns {Promise} The data of the Rowset object
         */
        RowsetAbstract.prototype.getData = function () {
            var self = this;
            var data = [];
        
            for(var index in this.rows) {
                data.push(this.rows[index].getData());
            }
        
            return data;
        };
        
        /**
         * This method will save all the rows in the rowset.
         * If one of the rows already exists, it will be updated.
         *
         * @method save
         * @returns {Promise} All the saved rows.
         */
        RowsetAbstract.prototype.save = function() {
            var promises = [];
        
            for(var index in this.rows) {
                var row = this.rows[index];
        
                var promise = row.save();
                promises.push(promise);
            }
        
            return Promise.all(promises);
        };
        
        /**
         * This method will delete all the rows in the current rowset.
         * This however is only done when the row isn&#x27;t new.
         *
         * @method delete
         * @returns {Promise} All the removed rows.
         */
        RowsetAbstract.prototype.delete = function() {
            var promises = [];
        
            for(var index in this.rows) {
                var row = this.rows[index];
        
                if(!row.isNew()) {
                    var promise = row.delete();
                    promises.push(promise);
                }
            }
        
            return Promise.all(promises);
        };
        
        /**
         * This method will return the first row object in the rowset.
         *
         * @method first
         * @returns {Row} The first row object in the rowset
         */
        RowsetAbstract.prototype.first = function() {
            return this.rows[0];
        };
        
        /**
         * This method will return the last row object in the rowset.
         *
         * @method last
         * @returns {Row} The last row object in the rowset
         */
        RowsetAbstract.prototype.last = function() {
            return this.rows[this.rows.length - 1];
        };
        
        /**
         * This method will return the total length of the rows.
         *
         * @method count
         * @returns {Number} The total rows in this rowset object.
         */
        RowsetAbstract.prototype.count = function() {
            return this.rows.length;
        };
        
        /**
         * The RowsetAbstract will expect no database so it will try to get its sibling Row object.
         *
         * @method getRow
         * @returns {Promise}
         */
        RowsetAbstract.prototype.getRow = function() {
            var identifier = this.getIdentifier().clone();
        
            return this.getObject(identifier.setPath([&#x27;database&#x27;, &#x27;row&#x27;]), null);
        }
        
        module.exports = RowsetAbstract;
            </pre>
        </div>
    </article>
</div>