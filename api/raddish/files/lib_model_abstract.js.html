---
layout: default
---

<div class="api">
    <aside class="sidebar">
        <ul>
                <li {% if page.url == '../classes/AbstractAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/AbstractAdapter.html">
                        AbstractAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/AbstractDispatcher.html' %} class="active" {% endif %}>
                    <a href="../classes/AbstractDispatcher.html">
                        AbstractDispatcher
                    </a>
                </li>
                <li {% if page.url == '../classes/Application.html' %} class="active" {% endif %}>
                    <a href="../classes/Application.html">
                        Application
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandBehavior.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandBehavior.html">
                        CommandBehavior
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandChain.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandChain.html">
                        CommandChain
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandContext.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandContext.html">
                        CommandContext
                    </a>
                </li>
                <li {% if page.url == '../classes/Controller.html' %} class="active" {% endif %}>
                    <a href="../classes/Controller.html">
                        Controller
                    </a>
                </li>
                <li {% if page.url == '../classes/ControllerAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ControllerAbstract.html">
                        ControllerAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/DefaultAuthenticator.html' %} class="active" {% endif %}>
                    <a href="../classes/DefaultAuthenticator.html">
                        DefaultAuthenticator
                    </a>
                </li>
                <li {% if page.url == '../classes/Dispatcher.html' %} class="active" {% endif %}>
                    <a href="../classes/Dispatcher.html">
                        Dispatcher
                    </a>
                </li>
                <li {% if page.url == '../classes/Inflector.html' %} class="active" {% endif %}>
                    <a href="../classes/Inflector.html">
                        Inflector
                    </a>
                </li>
                <li {% if page.url == '../classes/Mixin.html' %} class="active" {% endif %}>
                    <a href="../classes/Mixin.html">
                        Mixin
                    </a>
                </li>
                <li {% if page.url == '../classes/Model.html' %} class="active" {% endif %}>
                    <a href="../classes/Model.html">
                        Model
                    </a>
                </li>
                <li {% if page.url == '../classes/ModelAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ModelAbstract.html">
                        ModelAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/MongoAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/MongoAdapter.html">
                        MongoAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/MysqlAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/MysqlAdapter.html">
                        MysqlAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectIdentifier.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectIdentifier.html">
                        ObjectIdentifier
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectLoader.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectLoader.html">
                        ObjectLoader
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectManager.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectManager.html">
                        ObjectManager
                    </a>
                </li>
                <li {% if page.url == '../classes/Plugin.html' %} class="active" {% endif %}>
                    <a href="../classes/Plugin.html">
                        Plugin
                    </a>
                </li>
                <li {% if page.url == '../classes/RaddishError.html' %} class="active" {% endif %}>
                    <a href="../classes/RaddishError.html">
                        RaddishError
                    </a>
                </li>
                <li {% if page.url == '../classes/Role.html' %} class="active" {% endif %}>
                    <a href="../classes/Role.html">
                        Role
                    </a>
                </li>
                <li {% if page.url == '../classes/Router.html' %} class="active" {% endif %}>
                    <a href="../classes/Router.html">
                        Router
                    </a>
                </li>
                <li {% if page.url == '../classes/Row.html' %} class="active" {% endif %}>
                    <a href="../classes/Row.html">
                        Row
                    </a>
                </li>
                <li {% if page.url == '../classes/RowAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/RowAbstract.html">
                        RowAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/Rowset.html' %} class="active" {% endif %}>
                    <a href="../classes/Rowset.html">
                        Rowset
                    </a>
                </li>
                <li {% if page.url == '../classes/RowsetAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/RowsetAbstract.html">
                        RowsetAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/Socket.html' %} class="active" {% endif %}>
                    <a href="../classes/Socket.html">
                        Socket
                    </a>
                </li>
                <li {% if page.url == '../classes/SqliteAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/SqliteAdapter.html">
                        SqliteAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/States.html' %} class="active" {% endif %}>
                    <a href="../classes/States.html">
                        States
                    </a>
                </li>
                <li {% if page.url == '../classes/Table.html' %} class="active" {% endif %}>
                    <a href="../classes/Table.html">
                        Table
                    </a>
                </li>
                <li {% if page.url == '../classes/ViewAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ViewAbstract.html">
                        ViewAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/ViewJson.html' %} class="active" {% endif %}>
                    <a href="../classes/ViewJson.html">
                        ViewJson
                    </a>
                </li>
        </ul>    </aside>

    <article>
        <h1 class="file-heading">File: lib/model/abstract.js</h1>
        
        <div class="file">
            <pre class="code prettyprint linenums">
        &quot;use strict&quot;;
        
        var ObjectManager   = require(&#x27;../object/manager&#x27;),
            States          = require(&#x27;./states/states&#x27;),
            Inflector       = require(&#x27;../inflector/inflector&#x27;),
            util            = require(&#x27;util&#x27;);
        
        /**
         * This is an abstract model, used when using a model without table,
         * or creating your own model.
         *
         * This will create the states and set some predefined states which can be used at will.
         *
         * @class ModelAbstract
         * @extends ObjectManager
         * @constructor
         */
        function ModelAbstract(config) {
            this.states = new States();
            this.list = {};
            this.item = {};
        
            this.states
                .insert(&#x27;limit&#x27;, &#x27;int&#x27;, 20)
                .insert(&#x27;offset&#x27;, &#x27;int&#x27;, 0)
                .insert(&#x27;sort&#x27;, &#x27;string&#x27;)
                .insert(&#x27;direction&#x27;, &#x27;string&#x27;, &#x27;asc&#x27;);
        
            ObjectManager.call(this, config);
        }
        
        util.inherits(ModelAbstract, ObjectManager);
        
        /**
         * getList method which you need to override when you are fetching your own data.
         *
         * @method getList
         * @returns {Object} The retreived data from the data object.
         */
        ModelAbstract.prototype.getList = function () {
            return new Promise.cast(this.list);
        };
        
        /**
         * getItem method which you need to override when you are fetching your own data.
         *
         * @method getItem
         * @returns {Object} The retreived data from the data object.
         */
        ModelAbstract.prototype.getItem = function () {
            return new Promise.cast(this.item);
        };
        
        /**
         * getTotal which has the basic behavior of counting the rows in the current list.
         *
         * @method getTotal
         * @returns {Number} The total amount of rows.
         */
        ModelAbstract.prototype.getTotal = function() {
            if(!this.total) {
                return this.getList()
                    .then(function(list) {
                        return list.rows.length;
                    });
            } else {
                return this.total;
            }
        };
        
        /**
         * This method is used to set the states.
         * This method accepts an array or a string as the first parameter.
         * When the first parameter is a string the second parameter will be the value of this state.
         *
         * @method set
         * @param {Object|string} name The state/ array of states to set
         * @param {*} value The value of the state
         * @returns {ModelAbstract} The current model with set states.
         */
        ModelAbstract.prototype.set = function (name, value) {
            if(typeof name == &#x27;string&#x27;) {
                this.states.set(name, value);
            } else if(typeof name == &#x27;object&#x27;) {
                for(var index in name) {
                    this.states.set(index, name[index]);
                }
            }
        
            return this;
        };
        
        /**
         * This method will return the table connected to the current model.
         *
         * @method getTable
         * @returns {Promise} The promise holding the table object as content.
         */
        ModelAbstract.prototype.getTable = function () {
            var self = this;
            var identifier = this.getIdentifier().clone();
        
            return self.getObject(identifier.setPath([&#x27;database&#x27;, &#x27;table&#x27;]).setName(Inflector.singularize(identifier.getName())))
                .then(function(table) {
                    return table;
                });
        };
        
        module.exports = ModelAbstract
            </pre>
        </div>
    </article>
</div>