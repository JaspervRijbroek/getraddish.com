---
layout: default
---

<div class="api">
    <aside class="sidebar">
        <ul>
                <li {% if page.url == '../classes/AbstractAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/AbstractAdapter.html">
                        AbstractAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/AbstractDispatcher.html' %} class="active" {% endif %}>
                    <a href="../classes/AbstractDispatcher.html">
                        AbstractDispatcher
                    </a>
                </li>
                <li {% if page.url == '../classes/Application.html' %} class="active" {% endif %}>
                    <a href="../classes/Application.html">
                        Application
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandBehavior.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandBehavior.html">
                        CommandBehavior
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandChain.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandChain.html">
                        CommandChain
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandContext.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandContext.html">
                        CommandContext
                    </a>
                </li>
                <li {% if page.url == '../classes/Controller.html' %} class="active" {% endif %}>
                    <a href="../classes/Controller.html">
                        Controller
                    </a>
                </li>
                <li {% if page.url == '../classes/ControllerAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ControllerAbstract.html">
                        ControllerAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/DefaultAuthenticator.html' %} class="active" {% endif %}>
                    <a href="../classes/DefaultAuthenticator.html">
                        DefaultAuthenticator
                    </a>
                </li>
                <li {% if page.url == '../classes/Dispatcher.html' %} class="active" {% endif %}>
                    <a href="../classes/Dispatcher.html">
                        Dispatcher
                    </a>
                </li>
                <li {% if page.url == '../classes/Inflector.html' %} class="active" {% endif %}>
                    <a href="../classes/Inflector.html">
                        Inflector
                    </a>
                </li>
                <li {% if page.url == '../classes/Mixin.html' %} class="active" {% endif %}>
                    <a href="../classes/Mixin.html">
                        Mixin
                    </a>
                </li>
                <li {% if page.url == '../classes/Model.html' %} class="active" {% endif %}>
                    <a href="../classes/Model.html">
                        Model
                    </a>
                </li>
                <li {% if page.url == '../classes/ModelAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ModelAbstract.html">
                        ModelAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/MongoAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/MongoAdapter.html">
                        MongoAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/MysqlAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/MysqlAdapter.html">
                        MysqlAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectIdentifier.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectIdentifier.html">
                        ObjectIdentifier
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectLoader.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectLoader.html">
                        ObjectLoader
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectManager.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectManager.html">
                        ObjectManager
                    </a>
                </li>
                <li {% if page.url == '../classes/Plugin.html' %} class="active" {% endif %}>
                    <a href="../classes/Plugin.html">
                        Plugin
                    </a>
                </li>
                <li {% if page.url == '../classes/RaddishError.html' %} class="active" {% endif %}>
                    <a href="../classes/RaddishError.html">
                        RaddishError
                    </a>
                </li>
                <li {% if page.url == '../classes/Role.html' %} class="active" {% endif %}>
                    <a href="../classes/Role.html">
                        Role
                    </a>
                </li>
                <li {% if page.url == '../classes/Router.html' %} class="active" {% endif %}>
                    <a href="../classes/Router.html">
                        Router
                    </a>
                </li>
                <li {% if page.url == '../classes/Row.html' %} class="active" {% endif %}>
                    <a href="../classes/Row.html">
                        Row
                    </a>
                </li>
                <li {% if page.url == '../classes/RowAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/RowAbstract.html">
                        RowAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/Rowset.html' %} class="active" {% endif %}>
                    <a href="../classes/Rowset.html">
                        Rowset
                    </a>
                </li>
                <li {% if page.url == '../classes/RowsetAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/RowsetAbstract.html">
                        RowsetAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/Socket.html' %} class="active" {% endif %}>
                    <a href="../classes/Socket.html">
                        Socket
                    </a>
                </li>
                <li {% if page.url == '../classes/SqliteAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/SqliteAdapter.html">
                        SqliteAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/States.html' %} class="active" {% endif %}>
                    <a href="../classes/States.html">
                        States
                    </a>
                </li>
                <li {% if page.url == '../classes/Table.html' %} class="active" {% endif %}>
                    <a href="../classes/Table.html">
                        Table
                    </a>
                </li>
                <li {% if page.url == '../classes/ViewAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ViewAbstract.html">
                        ViewAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/ViewJson.html' %} class="active" {% endif %}>
                    <a href="../classes/ViewJson.html">
                        ViewJson
                    </a>
                </li>
        </ul>    </aside>

    <article>
        <h1 class="file-heading">File: lib/command/behavior/behavior.js</h1>
        
        <div class="file">
            <pre class="code prettyprint linenums">
        var ObjectManager   = require(&#x27;../../object/manager&#x27;),
            util            = require(&#x27;util&#x27;),
            Inflector       = require(&#x27;../../inflector/inflector&#x27;);
        
        /**
         * This is the base class every behavior needs.
         * This has the basic functions to let your behavior function properly.
         *
         * @class CommandBehavior
         * @extends ObjectManager
         * @param config
         * @constructor
         */
        function CommandBehavior(config) {
            ObjectManager.call(this, config);
        
            this.methods    = {};
            this.config     = {};
        }
        
        util.inherits(CommandBehavior, ObjectManager);
        
        /**
         * Add the config to the global object.
         *
         * @private
         * @method initialize
         * @param {Object} config The complete config object
         * @returns {Object} The complete initialized object
         */
        CommandBehavior.prototype.initialize = function(config) {
            this.config = config;
        
            return ObjectManager.prototype.initialize.call(this, config);
        };
        
        /**
         * With the help of this method you can register methods to a specific call.
         *
         * @method registerMethod
         * @param {Array|String} action The action or collection of actions to bind your method to.
         * @param {Function} method The function to call on the specified action(s).
         */
        CommandBehavior.prototype.registerMethod = function(action, method) {
            if(typeof action.push === &#x27;function&#x27;) {
                for(var index in action) {
                    this.registerMethod(action[index], method);
                }
            } else {
                if(!this.methods[action]) {
                    this.methods[action] = method;
                }
            }
        };
        
        /**
         * This method will check if the function exists in the current behavior, if so it will return true,
         *
         * @method hasMethod
         * @param {String} method The method name to check on.
         * @returns {boolean} The function exists or not.
         */
        CommandBehavior.prototype.hasMethod = function(method) {
            if(this.methods[method]) {
                return true;
            }
        
            method = this.getMethod(method);
            if(typeof this[method] === &#x27;function&#x27;) {
                return true;
            }
        
            return false;
        };
        
        /**
         * Execute the action.
         *
         * @method execute
         * @param {String} method The method name to execute, this is dot-separated
         * @param {CommandContext} context The context object to use in the method call.
         * @returns {CommandContext} The context object, which has gone through all the behaviors.
         */
        CommandBehavior.prototype.execute = function(method, context) {
            if(this.methods[method]) {
                method = this.methods[method];
            } else {
                method = this.getMethod(method);
            }
        
            if(typeof method === &#x27;string&#x27;) {
                return this[method](context);
            } else if(typeof method === &#x27;function&#x27;) {
                return method.call(this, context);
            }
        };
        
        /**
         * Convert the action name to a function name.
         *
         * @private
         * @method getMethod
         * @param {String} method The dot-separated name of the behavior
         * @returns {string} The behavior name as function name.
         */
        CommandBehavior.prototype.getMethod = function(action) {
            var parts = action.split(&#x27;.&#x27;);
            parts = parts.map(function(value) {
                return Inflector.capitalize(value.toLowerCase());
            });
        
            return &#x27;on&#x27; + parts.join(&#x27;&#x27;);
        };
        
        CommandBehavior.prototype.save = function(context) {
            var chain = context.data.table.getCommandChain();
            chain.disable();
        
            return context.data.save()
                .then(function() {
                    chain.enable();
        
                    return context;
                });
        };
        
        CommandBehavior.prototype.delete = function(context) {
            var chain = context.data.table.getCommandChain();
            chain.disable();
        
            return context.data.delete()
                .then(function() {
                    chain.enable();
        
                    return context;
                });
        };
        
        module.exports = CommandBehavior;
            </pre>
        </div>
    </article>
</div>