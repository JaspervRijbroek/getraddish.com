---
layout: default
---

<div class="api">
    <aside class="sidebar">
        <ul>
                <li {% if page.url == '../classes/AbstractAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/AbstractAdapter.html">
                        AbstractAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/AbstractDispatcher.html' %} class="active" {% endif %}>
                    <a href="../classes/AbstractDispatcher.html">
                        AbstractDispatcher
                    </a>
                </li>
                <li {% if page.url == '../classes/Application.html' %} class="active" {% endif %}>
                    <a href="../classes/Application.html">
                        Application
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandBehavior.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandBehavior.html">
                        CommandBehavior
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandChain.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandChain.html">
                        CommandChain
                    </a>
                </li>
                <li {% if page.url == '../classes/CommandContext.html' %} class="active" {% endif %}>
                    <a href="../classes/CommandContext.html">
                        CommandContext
                    </a>
                </li>
                <li {% if page.url == '../classes/Controller.html' %} class="active" {% endif %}>
                    <a href="../classes/Controller.html">
                        Controller
                    </a>
                </li>
                <li {% if page.url == '../classes/ControllerAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ControllerAbstract.html">
                        ControllerAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/DefaultAuthenticator.html' %} class="active" {% endif %}>
                    <a href="../classes/DefaultAuthenticator.html">
                        DefaultAuthenticator
                    </a>
                </li>
                <li {% if page.url == '../classes/Dispatcher.html' %} class="active" {% endif %}>
                    <a href="../classes/Dispatcher.html">
                        Dispatcher
                    </a>
                </li>
                <li {% if page.url == '../classes/Inflector.html' %} class="active" {% endif %}>
                    <a href="../classes/Inflector.html">
                        Inflector
                    </a>
                </li>
                <li {% if page.url == '../classes/Mixin.html' %} class="active" {% endif %}>
                    <a href="../classes/Mixin.html">
                        Mixin
                    </a>
                </li>
                <li {% if page.url == '../classes/Model.html' %} class="active" {% endif %}>
                    <a href="../classes/Model.html">
                        Model
                    </a>
                </li>
                <li {% if page.url == '../classes/ModelAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ModelAbstract.html">
                        ModelAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/MongoAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/MongoAdapter.html">
                        MongoAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/MysqlAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/MysqlAdapter.html">
                        MysqlAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectIdentifier.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectIdentifier.html">
                        ObjectIdentifier
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectLoader.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectLoader.html">
                        ObjectLoader
                    </a>
                </li>
                <li {% if page.url == '../classes/ObjectManager.html' %} class="active" {% endif %}>
                    <a href="../classes/ObjectManager.html">
                        ObjectManager
                    </a>
                </li>
                <li {% if page.url == '../classes/Plugin.html' %} class="active" {% endif %}>
                    <a href="../classes/Plugin.html">
                        Plugin
                    </a>
                </li>
                <li {% if page.url == '../classes/RaddishError.html' %} class="active" {% endif %}>
                    <a href="../classes/RaddishError.html">
                        RaddishError
                    </a>
                </li>
                <li {% if page.url == '../classes/Role.html' %} class="active" {% endif %}>
                    <a href="../classes/Role.html">
                        Role
                    </a>
                </li>
                <li {% if page.url == '../classes/Router.html' %} class="active" {% endif %}>
                    <a href="../classes/Router.html">
                        Router
                    </a>
                </li>
                <li {% if page.url == '../classes/Row.html' %} class="active" {% endif %}>
                    <a href="../classes/Row.html">
                        Row
                    </a>
                </li>
                <li {% if page.url == '../classes/RowAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/RowAbstract.html">
                        RowAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/Rowset.html' %} class="active" {% endif %}>
                    <a href="../classes/Rowset.html">
                        Rowset
                    </a>
                </li>
                <li {% if page.url == '../classes/RowsetAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/RowsetAbstract.html">
                        RowsetAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/Socket.html' %} class="active" {% endif %}>
                    <a href="../classes/Socket.html">
                        Socket
                    </a>
                </li>
                <li {% if page.url == '../classes/SqliteAdapter.html' %} class="active" {% endif %}>
                    <a href="../classes/SqliteAdapter.html">
                        SqliteAdapter
                    </a>
                </li>
                <li {% if page.url == '../classes/States.html' %} class="active" {% endif %}>
                    <a href="../classes/States.html">
                        States
                    </a>
                </li>
                <li {% if page.url == '../classes/Table.html' %} class="active" {% endif %}>
                    <a href="../classes/Table.html">
                        Table
                    </a>
                </li>
                <li {% if page.url == '../classes/ViewAbstract.html' %} class="active" {% endif %}>
                    <a href="../classes/ViewAbstract.html">
                        ViewAbstract
                    </a>
                </li>
                <li {% if page.url == '../classes/ViewJson.html' %} class="active" {% endif %}>
                    <a href="../classes/ViewJson.html">
                        ViewJson
                    </a>
                </li>
        </ul>    </aside>

    <article>
        <h1 class="file-heading">File: lib/database/row/default.js</h1>
        
        <div class="file">
            <pre class="code prettyprint linenums">
        &quot;use strict&quot;;
        
        var RowAbstract = require(&#x27;./abstract&#x27;),
            util        = require(&#x27;util&#x27;);
        
        /**
         * This class is a helper to structure data of the table,
         * this will only hold one table row.
         *
         * Also when extended the extra functions can be used.
         *
         * @class Row
         * @extends RowAbstract
         * @constructor
         */
        function Row(config) {
            Row.super_.call(this, config);
        }
        
        util.inherits(Row, RowAbstract);
        
        /**
         * This function will intialize the Row object.
         *
         * @method initialize
         * @param {Object} config The configuration of the Row object
         * @returns {Promise}
         */
        Row.prototype.initialize = function (config) {
            var self = this;
        
            if (config.table) {
                this.table = config.table;
            }
        
            return Row.super_.prototype.initialize.call(self, config)
                .then(function() {
                    return self.getTable();
                })
                .then(function() {
                    return self.table.getColumns();
                })
                .then(function(columns) {
                    return self.mapColumns(columns);
                });
        };
        
        /**
         * The load method will try to load the row from the database.
         *
         * @method load
         * @returns {Promise} The promise with the row object, or an empty row object.
         */
        Row.prototype.load = function() {
            // This function will be slightly slower.
            var self = this;
        
            return this.table.getQuery()
                .then(function(query) {
                    query = query.select();
                    query.table(self.table.getName());
        
                    return [query, self.table.getUniqueColumns()];
                })
                .spread(function(query, columns) {
                    for(var index in self.data) {
                        if(columns[index]) {
                            query.where(columns[index].name, &#x27;=&#x27;, self.data[index]);
                        }
                    }
        
                    return self.table.select(query, 1);
                });
        
        };
        
        /**
         * This function tries to save the object to the database,
         * when it is new the object is inerted into the database if it exists the row is updated.
         *
         * @method save
         * @returns {Promise} Returns the returned data.
         */
        Row.prototype.save = function () {
            if(this.new) {
                return this.table.insert(this);
            } else {
                return this.table.update(this);
            }
        };
        
        /**
         * This function tries to remove an entity from the database.
         *
         * @method delete
         * @returns {Promise}
         */
        Row.prototype.delete = function () {
            return this.table.delete(this);
        };
        
        /**
         * Return the table assiciated to the Row.
         *
         * @method getTable
         * @returns {Object} Return the table of the current row.
         */
        Row.prototype.getTable = function() {
            var self = this;
        
            if(this.table) {
                return Promise.resolve(this.table);
            } else {
                var identifier = this.getIdentifier().clone();
        
                return this.getObject(identifier.setPath([&#x27;database&#x27;, &#x27;table&#x27;]))
                    .then(function(table) {
                        self.table = table;
        
                        return self.table;
                    });
            }
        };
        
        /**
         * This function will map the table columns to the values of the row object.
         * Default table column values are supported.
         *
         * @method mapColumns
         * @param {Object} columns All the columns from the table.
         * @returns {Row} The current row object for chaining.
         */
        Row.prototype.mapColumns = function(columns) {
            for(var index in columns) {
                this.data[index] = columns[index].value;
            }
        
            return this;
        };
        
        /**
         * This function will clone the object and return a new Row object.
         *
         * @method clone
         * @returns {Row} The newly create Row object
         */
        Row.prototype.clone = function() {
            return new Row({
                identifier: this.getIdentifier()
            });
        };
        
        module.exports = Row;
            </pre>
        </div>
    </article>
</div>